<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>Node-foreman by NodeFly</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Node-foreman</h1>
        <h2>A Node.js Version of Foreman</h2>

        <section id="downloads">
          <a href="https://github.com/NodeFly/node-foreman/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/NodeFly/node-foreman/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/NodeFly/node-foreman" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>Node Foreman</h1>

<p>Node Foreman is a Node.js version of the popular Foreman tool,
with a few Node specific changes.</p>

<h2>Install</h2>

<p>Install the command line tool</p>

<pre><code>$ npm install -g foreman
</code></pre>

<h2>Usage</h2>

<p>Create a <code>Procfile</code> in the form of:</p>

<pre><code>web: node web_server.js
api: node api_server.js
log: node log_server.js
</code></pre>

<p>Optionally create a <code>.env</code> file to pre-load environmental variables:</p>

<pre><code>MYSQL_NAME=superman
MYSQL_PASS=cryptonite
</code></pre>

<p>The equivalent <code>.env</code> file may alternatively be a valid JSON document:</p>

<pre><code>{
    "mysql":{
        "name": "superman",
        "pass": "cryptonite"
    }
}
</code></pre>

<p>The above JSON document will be flattened into env variables by 
concatenating the nested values with an underscore.
Environmental variables are passed in fully capitalized.
There is no need to specify which type of file you wish to use.</p>

<p>Start your process with <code>nf</code> (node-foreman):</p>

<pre><code>$ nf start

18:51:12: web.1     |  Web Server started listening on 0.0.0.0:5000
18:51:13: api.1     |  Api Server started listening on 0.0.0.0:5100
18:51:13: log.1     |  Log Server started listening on 0.0.0.0:5200
</code></pre>

<p>Your module directory should end up looking like the following:</p>

<pre><code>/
├─ .env
├─ package.js
├─ server.js
├─ Procfile
</code></pre>

<h3>Advanced Usage</h3>

<p>Node Foreman lets you start multiple jobs of the same type:</p>

<pre><code>$ nf start web=5

18:51:12: web.1     |  Web Server started listening on 0.0.0.0:5000
18:51:12: web.2     |  Web Server started listening on 0.0.0.0:5001
18:51:12: web.3     |  Web Server started listening on 0.0.0.0:5002
18:51:12: web.4     |  Web Server started listening on 0.0.0.0:5003
18:51:12: web.5     |  Web Server started listening on 0.0.0.0:5004
</code></pre>

<p>Each job will be started as its own process, receiving a different <code>PORT</code>
environmental variable. 
The port number for processes of the same type will be offset by 1.
The port number for processes of different types will be offset by 100.</p>

<pre><code>$ nf start web=2,api=2

18:51:12: web.1     |  Web Server started listening on 0.0.0.0:5000
18:51:12: web.2     |  Web Server started listening on 0.0.0.0:5001
18:51:12: api.1     |  Api Server started listening on 0.0.0.0:5100
18:51:12: api.2     |  Api Server started listening on 0.0.0.0:5101
</code></pre>

<h2>Export</h2>

<p>Node Foreman is designed to be in a development environment,
however it can export an Upstart job for use in production.
The Upstart file has <em>no</em> dependency on Node Foreman.</p>

<pre><code>$ nf export upstart -a JOBNAME /etc/init
</code></pre>

<p>Start and stop your jobs with</p>

<pre><code>$ sudo start JOBNAME
$ sudo stop JOBNAME
</code></pre>
      </section>
    </div>

    
  </body>
</html>